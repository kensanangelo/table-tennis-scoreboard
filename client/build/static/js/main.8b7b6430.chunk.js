(this.webpackJsonpscoreboard=this.webpackJsonpscoreboard||[]).push([[0],{10:function(e,a,t){e.exports=t(18)},15:function(e,a,t){},16:function(e,a,t){},18:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),s=t(8),i=t.n(s),o=(t(15),t(9)),c=(t(16),t(1)),l=t(2),m=t(4),u=t(3),h=function(e){Object(m.a)(t,e);var a=Object(u.a)(t);function t(e){var n;return Object(c.a)(this,t),(n=a.call(this,e)).state={time:(new Date).toLocaleString("en-US",{hour:"numeric",minute:"numeric",hour12:!0})},n}return Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.intervalID=setInterval((function(){return e.tick()}),1e3)}},{key:"componentWillUnmount",value:function(){clearInterval(this.intervalID)}},{key:"tick",value:function(){this.setState({time:(new Date).toLocaleString("en-US",{hour:"numeric",minute:"numeric",hour12:!0})})}},{key:"render",value:function(){return r.a.createElement("p",{className:"clock"},this.state.time)}}]),t}(r.a.Component),p=t(5),y=t.n(p),v=t(6),d="/api/hello",g="/api/submit-game",f="/api/get-players",S="102nf238971",w=function(){var e=Object(v.a)(y.a.mark((function e(){var a,t;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(d);case 2:return a=e.sent,e.next=5,a.json();case 5:if(t=e.sent,200===a.status){e.next=8;break}throw Error(t.message);case 8:return e.abrupt("return",t.msg);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),b=function(){var e=Object(v.a)(y.a.mark((function e(a){var t,n;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.token=S,e.next=3,fetch(g,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});case 3:return t=e.sent,e.next=6,t.json();case 6:if(n=e.sent,200===t.status){e.next=9;break}throw Error(n.message);case 9:return e.abrupt("return",n.message);case 10:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),E=function(){var e=Object(v.a)(y.a.mark((function e(){var a,t,n;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={token:S},e.next=3,fetch(f,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});case 3:if(!(t=e.sent).ok){e.next=13;break}return e.next=7,t.json();case 7:if(n=e.sent,200===t.status){e.next=10;break}throw Error(n.message);case 10:return e.abrupt("return",n.players);case 13:throw Error(t.statusText);case 14:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),k=function(e){Object(m.a)(t,e);var a=Object(u.a)(t);function t(e){var n;return Object(c.a)(this,t),(n=a.call(this,e)).state={gameMode:"standard",gameState:"setup",availablePlayers:[],serverStatus:"CANNOT CONNECT TO API",players:{home:{id:"",name:"",isServing:!0},away:{id:"",name:"",isServing:!1}}},n}return Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this,a=this.state;w().then((function(t){a.serverStatus=t,E().then((function(t){a.availablePlayers=t,a.players.home.id=t[0].player_id,a.players.home.name=t[0].name;var n=t.length-1;a.players.away.id=t[n].player_id,a.players.away.name=t[n].name,e.setState(a)}))}))}},{key:"onHomeChange",value:function(e){var a=this.state,t=e.target.selectedIndex;a.players.home.id=e.target.options[t].value,a.players.home.name=e.target.options[t].text,this.setState(a)}},{key:"onAwayChange",value:function(e){var a=this.state,t=e.target.selectedIndex;a.players.away.id=e.target.options[t].value,a.players.away.name=e.target.options[t].text,this.setState(a)}},{key:"onServingChange",value:function(e){var a=this.state;"home"===e.target.value?(a.players.home.isServing=!0,a.players.away.isServing=!1):"away"===e.target.value&&(a.players.home.isServing=!1,a.players.away.isServing=!0),this.setState(a)}},{key:"startGame",value:function(){var e=this.state;this.props.startGame({gameMode:e.gameMode,gameState:"playing",players:{home:{id:e.players.home.id,name:e.players.home.name,isServing:e.players.home.isServing},away:{id:e.players.away.id,name:e.players.away.name,isServing:e.players.away.isServing}}})}},{key:"setPracticeMode",value:function(){var e=this.state;e.gameMode="practice",e.players.home.name="Home",e.players.home.id="",e.players.away.name="Away",e.players.away.id="",this.setState(e),this.startGame()}},{key:"render",value:function(){var e=this,a="Connected to API"===this.state.serverStatus;return r.a.createElement("div",{className:"setup"},r.a.createElement("p",{className:"setup__server\n\t\t\t\t\t\t".concat(a?"":"error-msg","\n\t\t\t\t\t")},this.state.serverStatus),r.a.createElement("h1",{className:"setup__header"},"Enter players"),r.a.createElement("div",{className:"setup__players"},r.a.createElement("div",{className:"setup__player setup__player--home"},r.a.createElement("h2",{className:"setup__player-header"},"Home"),0!==this.state.availablePlayers.length?r.a.createElement("select",{id:"home-player",onChange:this.onHomeChange.bind(this)},this.state.availablePlayers.map((function(e){return r.a.createElement("option",{key:e.player_id,value:e.player_id},e.name)}))):"No players available"),r.a.createElement("div",{className:"setup__serving"},r.a.createElement("h3",{className:"setup__header"},"Who's serving?"),r.a.createElement("label",{className:"setup__label"},"Home",r.a.createElement("input",{type:"radio",name:"serving",value:"home",onChange:this.onServingChange.bind(this),checked:this.state.players.home.isServing})),r.a.createElement("label",{className:"setup__label"},"Away",r.a.createElement("input",{type:"radio",name:"serving",value:"away",onChange:this.onServingChange.bind(this),checked:this.state.players.away.isServing}))),r.a.createElement("div",{className:"setup__player setup__player--away"},r.a.createElement("h2",{className:"setup__player-header"},"Away"),0!==this.state.availablePlayers.length?r.a.createElement("select",{id:"away-player",onChange:this.onAwayChange.bind(this)},this.state.availablePlayers.slice(0).reverse().map((function(a){return e.state.players.home.id!==a.player_id?r.a.createElement("option",{key:a.player_id,value:a.player_id},a.name):""}))):"No players available")),r.a.createElement("button",{onClick:this.startGame.bind(this)},"Start Game"),r.a.createElement("button",{onClick:this.setPracticeMode.bind(this)},"Practice Game"))}}]),t}(r.a.Component),_=function(e){Object(m.a)(t,e);var a=Object(u.a)(t);function t(){return Object(c.a)(this,t),a.apply(this,arguments)}return Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"scoreboard__card"},r.a.createElement("div",{className:"scoreboard__serving-container"},this.props.isServing?r.a.createElement("div",{className:"scoreboard__serving"},"Serving"):""),r.a.createElement("div",{className:"scoreboard__name"},this.props.name),r.a.createElement("div",{className:"scoreboard__score"},this.props.score))}}]),t}(r.a.Component),O=function(e){Object(m.a)(t,e);var a=Object(u.a)(t);function t(e){var n;Object(c.a)(this,t),(n=a.call(this,e)).handleKeyPress=function(e){"gameOver"!==n.state.gameState&&("z"===e.key?n.nextPlay("home"):"p"===e.key&&n.nextPlay("away"))},n.nextPlay=function(e){var a=n.state;a=n.incrementPlays(a),"home"===e?a.home.score++:"away"===e&&a.away.score++,n.checkForOvertime(a)&&(a.gameState="overtime"),a=n.checkForWinner(a),n.setState(a)};return n.state={winScore:11,serveChangeLimit:5,plays:0,gameMode:n.props.gameMode,gameState:"playing",winner:{id:0,name:""},home:{id:e.players.home.id,name:e.players.home.name,score:0,isServing:e.players.home.isServing},away:{id:e.players.away.id,name:e.players.away.name,score:0,isServing:e.players.away.isServing}},n}return Object(l.a)(t,[{key:"componentDidMount",value:function(){document.addEventListener("keyup",this.handleKeyPress,!1)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keyup",this.handleKeyPress,!1)}},{key:"incrementPlays",value:function(e){return e.plays++,e.plays%e.serveChangeLimit===0&&(e.home.isServing=!e.home.isServing,e.away.isServing=!e.away.isServing),e}},{key:"checkForOvertime",value:function(e){if("overtime"===e.gameState)return!0;var a=e.winScore-1;return e.home.score===a&&e.away.score===a}},{key:"checkForWinner",value:function(e){function a(e){return{id:e.id,name:e.name}}var t={id:"",name:""};return"overtime"===e.gameState?e.home.score-e.away.score>=2?t=a(e.home):e.away.score-e.home.score>=2&&(t=a(e.away)):e.home.score===e.winScore?t=a(e.home):e.away.score===e.winScore&&(t=a(e.away)),""!==t.name&&(e.winner=t,e.gameState="gameOver","standard"===e.gameMode&&b(e).then((function(e){return console.log(e)})).catch((function(e){return console.log(e)}))),e}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"scoreboard"},r.a.createElement(_,{name:this.state.home.name,score:this.state.home.score,isServing:this.state.home.isServing}),r.a.createElement(_,{name:this.state.away.name,score:this.state.away.score,isServing:this.state.away.isServing}),"gameOver"===this.state.gameState?r.a.createElement("div",{className:"scoreboard__gameover"},r.a.createElement("h1",null,"GAME OVER"),r.a.createElement("p",null,this.state.winner.name," wins!"),r.a.createElement("button",{onClick:function(){return e.props.setNewGame()}},"Start New Game")):"")}}]),t}(r.a.Component);var N=function(){var e={gameMode:"standard",gameState:"setup",players:{home:{id:"",name:"Home",isServing:!0},away:{id:"",name:"Away",isServing:!1}}},a=Object(n.useState)(e),t=Object(o.a)(a,2),s=t[0],i=t[1];return r.a.createElement("div",{className:"App"},r.a.createElement(h,null),"setup"===s.gameState?r.a.createElement(k,{startGame:function(e){i(e)}}):r.a.createElement(O,{players:s.players,gameMode:s.gameMode,setNewGame:function(){i(e)}}))};i.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(N,null)),document.getElementById("root"))}},[[10,1,2]]]);
//# sourceMappingURL=main.8b7b6430.chunk.js.map